	MOVE LABELA, R1
    MOVE 10000, SP
    MOVE 1000, R6

PETLJA
    LOADH R2, (R1)
    ADD R1, 2, R1
    LOADH R3, (R1)
    ADD R1, 2, R1

    CMP R2, 8000
    JP_NE DALJE
    CMP R3, 8000
    JP_EQ KRAJ
DALJE
    SHL R2, %D 16, R2
    ASHR R2, %D 16, R2

    SHL R3, %D 16, R3
    ASHR R3, %D 16, R3

    PUSH R2
    PUSH R3

    CALL COMP

    STORE R0, (R6)
    ADD R6, 4, R6

    JP PETLJA

KRAJ
    HALT

LABELA DH 4321, 432C, 0FF, 7DBA, 548B, 0B78B, 0BADA, 0DEDA, 7C8A, 1B39, 8000, 8000
TMP_VAL DW 0FF000000
CALL_ADDR DW 0

COMP
    POP R5

    MOVE 0, R0

    STORE R5, (CALL_ADDR)

    POP R5
    POP R4

    LOAD R3, (TMP_VAL)
    MOVE 0, R2

    XOR R4, R5, R4

PETLJA2
    AND R4, R3, R5
    CMP R5, 0
    JP_EQ JEDNAKI
    OR R0, 0BB, R0
    JP DALJE2

JEDNAKI
    OR R0, 0AA, R0
DALJE2
    CMP R2, 3
    JP_EQ KRAJFUNC

    SHL R0, 8, R0
    SHL R4, 8, R4

    ADD R2, 1, R2
    JP PETLJA2

KRAJFUNC

    LOAD R5, (CALL_ADDR)
    PUSH R5
    RET
